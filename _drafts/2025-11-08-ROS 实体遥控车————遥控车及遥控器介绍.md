---
layout: post
title:  "从零到自动驾驶——我带娃打造 ROS 智能小车的长期计划（附完整 Roadmap）"
categories: 智能小车
tags:  智能小车 ROS
---

* content
{:toc}


作为一名想带娃玩转科技的技术爸爸，朋友主动借出闲置的塔克创新 ROS 智能小车后，我最先聚焦的就是遥控功能 —— 毕竟对孩子来说，“上手就能玩” 是保持兴趣的关键，对我而言，熟悉基础遥控逻辑也是后续自定义改造的前提。

## 一、塔克创新 ROS 小车（AKMX2 系列）核心解析

塔克创新 ROS 小车 AKMX2 系列是一款兼顾新手友好度与进阶扩展性的智能平台，既适合亲子互动体验，也能满足机器人爱好者的二次开发需求，核心硬件配置扎实且针对性强：

* **ROS 控制器**：搭载 NVIDIA Jetson Nano 控制器，作为低功耗嵌入式计算设备，专为边缘计算和 AI 应用设计，运行 Ubuntu 18.04 系统与 Melodic 版本 ROS，是小车的 “智慧大脑”。

* **运动控制器**：配备塔克自主研发的 OpenCRP 运动控制器，支持两个后轮驱动轮的独立闭环控制，可实现前进、后退、转向等基础动作，部分型号支持全向移动，电机转速可控，适配不同场景需求。

* **传感器系统**：集成激光雷达（思岚 A1 高速版）、1080P 广角相机 / 深度相机、MPU6050 加速度陀螺仪等多种传感器，既能实现环境感知，也为后续智能功能升级预留了硬件基础。

* **电源系统**：采用可充电锂电池供电，满电状态下可持续工作 2-3 小时，完全能覆盖日常亲子互动和基础测试的使用时长。

## 二、北通手柄：闲置复用的适配选择

我手头刚好有孩子上幼儿园时学围棋用的北通蝙蝠游戏手柄，现在闲置下来刚好 “废物利用”。结合小车使用要求，手柄适配需满足两个核心条件：

* 支持 PC 模式：北通蝙蝠 D2E/D2A/D2F 等型号均符合标准，部分多模式手柄需长按 MODE 键切换至 PC 模式（红灯常亮），否则小车无法识别。

* 连接方式：近距离控制（≤10 米）时，将手柄接收器直接插入小车 Jetson Nano 控制器的 USB 口，连接稳定不易掉线。

## 三、实操步骤：3 步解锁手柄控制（附参数调节）

熟悉适配规则后，实操流程简单易上手，结合手册步骤和实际操作补充细节如下：


1. 启动底盘驱动：通过 SSH 连接机器人，输入命令`roslaunch xtark_driver xtark_driver.launch`，等待终端显示 “Start Robot!”，即表示底盘驱动启动成功，小车进入待控制状态。

2. 启动手柄控制节点：新建终端并保持 SSH 连接，输入`roslaunch xtark_ctl xtark_joy.launch`，启动手柄控制节点，此时手柄与小车建立通信链路。

3. 开始操控：默认控制逻辑为 —— 按住 “LB” 按键激活操控权限，右侧摇杆控制前后 / 全向运动（差速平台仅支持前后），左侧摇杆左右控制转向，操控灵活性优于默认遥控器的固定速度模式。

4. 速度参数调节：若觉得速度过快或过慢，可进入`~/ros_ws/src/xtark_ctl/launchs`目录，编辑`xtark_joy.launch`文件，修改线速度缩放系数（x\_speed\_scale/y\_speed\_scale）和角速度缩放系数（w\_speed\_scale），按需适配使用场景。

整个过程耗时不到 5 分钟，对新手非常友好，无需复杂操作就能快速上手。

## 四、现有遥控功能的 “局限”：待改造的核心痛点

实际使用中，现有遥控功能的不足逐渐显现，也明确了后续自定义改造的重点方向：

* 速度调节不直观：当前需通过配置文件修改速度参数，无法实现 “轻轻推摇杆 = 慢慢走、推幅越大速度越快” 的线性调节体验。


* 无速度挡位划分：无法满足孩子在野外 “慢走、快走、奔跑” 的不同场景需求，缺乏明确的速度切换逻辑。

* 转向与急停缺失：转向角度无法灵活调整，且无专门的急停按键，遇到突发情况只能松开摇杆，反应不够及时。

* 按键映射固定：现有按键功能无法自定义，与常见游戏的操控逻辑存在差异，孩子上手需要重新适应。

## 五、手柄通信状态排查：快速定位问题

若遇到手柄控制失效、运动不连贯等问题，可通过以下步骤排查通信状态：

1. SSH 连接机器人后，输入`rostopic list`命令，若列表中出现`/joy`话题，说明手柄已被成功识别。

2. 输入`rostopic echo /joy`命令，按动手柄按键或推动摇杆，终端会实时显示 axes（摇杆角度）和 buttons（按键状态）的数值变化；若数值无响应，则说明通信中断，需重新插拔手柄接收器。

这个排查方法非常实用，我曾遇到小车转向无反应的情况，通过该方法发现是左侧摇杆的 axes 数值无变化，重新插拔接收器后问题立即解决，快速定位了故障原因。

## 六、总结：基础够用，改造空间可期

塔克创新 ROS 小车的 PC 无线手柄控制功能整体 “基础扎实、实用性强”：适配流程简单、操控精准度高，北通等主流 PC 手柄均能兼容，完全能满足日常亲子互动和基础测试需求。但从自定义和体验优化角度看，固定按键映射、无速度挡位、无急停功能等局限，也为后续改造留下了充足空间。

接下来，我计划基于现有功能，开发三挡速度切换、急停按键绑定、自定义按键映射等功能，让小车更贴合孩子的操作习惯，也让亲子科技互动更安全、更有趣。
